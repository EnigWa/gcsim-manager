let _execute_action = execute_action;
fn execute_action(char_id number, action_id number, p map) {
  if action_id == .action.dash {
    pick_up_crystallize("any"); # Pick up crystallize before every dash
  }

  return _execute_action(char_id, action_id, p);
}

options swap_delay=12 iteration=100;

navia char lvl=90/90 cons=0 talent=9,9,9;
navia add weapon="tidalshadow" refine=5 lvl=90/90 +params=[stacks=0];
navia add set="mh" count=4;
navia add stats hp=4780 atk=311 atk%=0.466 atk%=0.466 cr=0.311; #main
navia add stats def%=0.124 def=39.36 hp=507.88 hp%=0.0992 atk=33.08 atk%=0.2976 er=0.1102 em=39.64 cr=0.2648 cd=0.7944;

mavuika char lvl=90/90 cons=0 talent=9,9,9;
mavuika add weapon="tidalshadow" refine=5 lvl=90/90 +params=[stacks=5];
mavuika add set="oc" count=5;
mavuika add stats hp=4780 atk=311 em=187 pyro%=0.466 cd=0.622 ; #main
mavuika add stats def%=0.124 def=39.36 hp=507.88 hp%=0.0992 atk=33.08 atk%=0.0992 er=0.1102 em=79.28 cr=0.3972 cd=0.662;

xilonen char lvl=90/90 cons=0 talent=9,9,9; 
xilonen add weapon="favsword" refine=5 lvl=90/90;
xilonen add set="scroll" count=4;
xilonen add stats hp=4780 atk=311 def%=0.583 def%=0.583 cr=0.311 ; #main
xilonen add stats def%=0.248 def=39.36 hp=507.88 hp%=0.0992 atk=33.08 atk%=0.0992 er=0.1102 em=39.64 cr=0.331 cd=0.7944;

furina char lvl=90/90 cons=0 talent=9,9,9;
furina add weapon="festering" refine=5 lvl=90/90;
furina add set="tom" count=4;
furina add stats hp=4780 atk=311 hp%=0.466 hp%=0.466 cd=0.622 ; #main
furina add stats def%=0.124 def=39.36 hp=507.88 hp%=0.0992 atk=33.08 atk%=0.0992 er=0.4408 em=39.64 cr=0.3972 cd=0.3972;

target lvl=100 resist=0.1 radius=2 pos=0,2.4 hp=999999999;
energy every interval=480,720 amount=1;

active mav; # Navia is the active member because she needs to stack Serpent Spine
mav skill; # Mav uses E first rot for Pyro Scroll and some initial damage during setup
for let i=0; i<4; i=i+1 {
  xilo skill, attack:2, burst;
  furina skill, dash, burst;
  navia burst;
  mav burst, charge, dash;
  xilonen skill, attack:2;
  pick_up_crystallize("any");
  navia skill, attack:3, dash, attack;
  mav skill[hold=1], charge;
  navia skill[hold=1], attack:2, dash, attack:2;
}
navia skill[hold=1];

# "Magma Wheelchair Navia"
# Mav E (First Rot) > Xilo E N2 Q > Furina ED Q > Navia Q > Mav Q CD > Xilo E N2 > Navia (H)E N3D N1 > Mav hE C > Navia (H)E N3D N1 # Navia ends the config with a final hE
